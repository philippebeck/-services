"use strict";import axios from"axios";import emailValidator from"email-validator";import passValidator from"password-validator";import validUrl from"valid-url";import constants from"/constants";function checkEmail(t){return!!emailValidator.validate(t)||(alert(constants.CHECK_EMAIL),!1)}function checkLikes(t){for(var e of t)if(e===constants.USER_ID)return!0;return!1}function checkNumber(t,e=constants.NUM_MIN,r=constants.NUM_MAX){return e<=(t=Number(t))&&t<=r||(alert(constants.CHECK_NUMBER+` ${e} & ${r} !`),!1)}function checkPass(t){var e=new passValidator;return e.is().min(constants.PASS_MIN).is().max(constants.PASS_MAX).has().uppercase().has().lowercase().has().digits(constants.PASS_INT).has().not().spaces(),!!e.validate(t)||(alert(constants.CHECK_PASS),!1)}function checkRole(t,e){let r=null;switch(t){case"admin":r=!0;break;case"editor":r="admin"!==e;break;case"user":r="user"===e;break;default:r=!1}return r}function checkString(t,e=constants.STRING_MIN,r=constants.STRING_MAX){return(t=String(t)).length>=e&&t.length<=r||(alert(constants.CHECK_STRING+` ${e} & ${r} !`),!1)}function checkUrl(t){return!!validUrl.isUri(t)||(alert(constants.CHECK_URL),!1)}function setAxios(){axios.defaults.baseURL=constants.API_URL,axios.defaults.headers.post["Content-Type"]=constants.CONTENT_TYPE,constants.TOKEN&&(axios.defaults.headers.common.Authorization="Bearer "+constants.TOKEN)}async function getData(t){return setAxios(),(await axios.get(t)).data}async function postData(t,e){return setAxios(),(await axios.post(t,e)).data}async function patchData(t,e){return setAxios(),(await axios.patch(t,e)).data}async function putData(t,e){return setAxios(),(await axios.put(t,e)).data}async function deleteData(t){return setAxios(),(await axios.delete(t)).data}function getAverage(t,e){var r,a,o,n={},c=[];for(r of e)n[r.product]?(n[r.product].sum+=r.score,n[r.product].n++):n[r.product]={sum:r.score,n:1};for(a of Object.keys(n))c.push({product:a,score:n[a].sum/n[a].n});for(o of c)if(t===o.product)return o.score}function getCats(t){var e,r=new Set;for(e of t)r.add(e.cat);return Array.from(r)}function getItemName(t,e){for(var r of e)if(r._id===t)return r.name;return!1}function getItemsByCat(t){var e,r={};for(e of t)r[e.cat]||(r[e.cat]=[]),r[e.cat].push(e),r[e.cat].sort((t,e)=>t.name>e.name?1:-1);return r}function setGlobalMeta(t="en",e=""){document.querySelector("html").setAttribute("lang",t),document.querySelector('[name="twitter:creator"]')&&document.querySelector('[name="twitter:creator"]').setAttribute("content",e)}function setTitle(t){document.querySelector("title").textContent=t,document.querySelector('[property="og:title"]')&&(document.querySelector('[property="og:title"]').textContent=t),document.querySelector('[name="twitter:title"]')&&(document.querySelector('[name="twitter:title"]').textContent=t)}function setDescription(t){document.querySelector('[name="description"]').setAttribute("content",t),document.querySelector('[property="og:description"]')&&document.querySelector('[property="og:description"]').setAttribute("content",t),document.querySelector('[name="twitter:description"]')&&document.querySelector('[name="twitter:description"]').setAttribute("content",t)}function setUrl(t){document.querySelector('[rel="canonical"]').setAttribute("href",t),document.querySelector('[property="og:url"]')&&document.querySelector('[property="og:url"]').setAttribute("content",t),document.querySelector('[name="twitter:site"]')&&document.querySelector('[name="twitter:site"]').setAttribute("content",t)}function setImage(t){document.querySelector('[property="og:image"]')&&document.querySelector('[property="og:image"]').setAttribute("content",t),document.querySelector('[name="twitter:image"]')&&document.querySelector('[name="twitter:image"]').setAttribute("content",t)}function setMeta(t,e,r="",a=""){setTitle(t),setDescription(e),""!==r&&setUrl(r),""!==a&&setImage(a)}export default{checkEmail:checkEmail,checkPass:checkPass,checkUrl:checkUrl,checkLikes:checkLikes,checkNumber:checkNumber,checkRole:checkRole,checkString:checkString,getData:getData,postData:postData,patchData:patchData,putData:putData,deleteData:deleteData,getAverage:getAverage,getCats:getCats,getItemName:getItemName,getItemsByCat:getItemsByCat,setTitle:setTitle,setDescription:setDescription,setUrl:setUrl,setImage:setImage,setGlobalMeta:setGlobalMeta,setMeta:setMeta};