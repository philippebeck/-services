"use strict";import axios from"axios";import emailValidator from"email-validator";import passValidator from"password-validator";import validUrl from"valid-url";import constants from"/constants";function checkSession(t,a){if(localStorage.userId){var e=JSON.parse(localStorage.userId);for(const s of t)if(e===s._id)return checkRole(s.role,a)}return!1}function checkRole(t,a){let e=null;switch(t){case"admin":e=!0;break;case"editor":e="admin"!==a;break;case"user":e="user"===a;break;default:e=!1}return e}function checkName(t){return t.length>=constants.NAME_MIN&&t.length<=constants.NAME_MAX||(alert(constants.ALERT_NAME),!1)}function checkEmail(t){return!!emailValidator.validate(t)||(alert(constants.ALERT_EMAIL),!1)}function checkPass(t){var a=new passValidator;return a.is().min(constants.PASS_MIN).is().max(constants.PASS_MAX).has().uppercase().has().lowercase().has().digits(constants.PASS_INT).has().not().spaces(),!!a.validate(t)||(alert(constants.ALERT_PASS),!1)}function checkUrl(t){return!!validUrl.isUri(t)||(alert(constants.ALERT_URL),!1)}function checkLikes(a){for(let t=0;t<a.length;t++)if(constants.USER_ID===a[t])return!0;return!1}function setAxios(){axios.defaults.baseURL=constants.API_URL,axios.defaults.headers.post["Content-Type"]=constants.CONTENT_TYPE,constants.TOKEN&&(axios.defaults.headers.common.Authorization="Bearer "+constants.TOKEN)}async function getData(t){return setAxios(),(await axios.get(t)).data}async function postData(t,a){return setAxios(),(await axios.post(t,a)).data}async function patchData(t,a){return setAxios(),(await axios.patch(t,a)).data}async function putData(t,a){return setAxios(),(await axios.put(t,a)).data}async function deleteData(t){return setAxios(),(await axios.delete(t)).data}function getItemName(t,a){for(var e of a)if(e._id===t)return e.name;return!1}function setCats(t){var a,e=new Set;for(a of t)e.add(a.cat);return Array.from(e)}function sortItemsByCat(t){var a,e={};for(a of t)e[a.cat]||(e[a.cat]=[]),e[a.cat].push(a),e[a.cat].sort((t,a)=>t.name>a.name?1:-1);return e}export default{checkSession:checkSession,checkRole:checkRole,checkName:checkName,checkEmail:checkEmail,checkPass:checkPass,checkUrl:checkUrl,checkLikes:checkLikes,getData:getData,postData:postData,patchData:patchData,putData:putData,deleteData:deleteData,getItemName:getItemName,setCats:setCats,sortItemsByCat:sortItemsByCat};