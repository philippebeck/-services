"use strict";import axios from"axios";import emailValidator from"email-validator";import passValidator from"password-validator";import validUrl from"valid-url";import constants from"/constants";function checkEmail(t){return!!emailValidator.validate(t)||(alert(constants.CHECK_EMAIL),!1)}function checkLikes(t){for(var a of t)if(a===constants.USER_ID)return!0;return!1}function checkPass(t){var a=new passValidator;return a.is().min(constants.PASS_MIN).is().max(constants.PASS_MAX).has().uppercase().has().lowercase().has().digits(constants.PASS_INT).has().not().spaces(),!!a.validate(t)||(alert(constants.CHECK_PASS),!1)}function checkRole(t,a){let e=null;switch(t){case"admin":e=!0;break;case"editor":e="admin"!==a;break;case"user":e="user"===a;break;default:e=!1}return e}function checkString(t,a=process.env.STRING_MIN,e=process.env.STRING_MAX){return(t=String(t)).length>=a&&t.length<=e||(alert(constants.CHECK_STRING+` ${a} & ${e} !`),!1)}function checkUrl(t){return!!validUrl.isUri(t)||(alert(constants.CHECK_URL),!1)}function setAxios(){axios.defaults.baseURL=constants.API_URL,axios.defaults.headers.post["Content-Type"]=constants.CONTENT_TYPE,constants.TOKEN&&(axios.defaults.headers.common.Authorization="Bearer "+constants.TOKEN)}async function getData(t){return setAxios(),(await axios.get(t)).data}async function postData(t,a){return setAxios(),(await axios.post(t,a)).data}async function patchData(t,a){return setAxios(),(await axios.patch(t,a)).data}async function putData(t,a){return setAxios(),(await axios.put(t,a)).data}async function deleteData(t){return setAxios(),(await axios.delete(t)).data}function getCats(t){var a,e=new Set;for(a of t)e.add(a.cat);return Array.from(e)}function getItemName(t,a){for(var e of a)if(e._id===t)return e.name;return!1}function getItemsByCat(t){var a,e={};for(a of t)e[a.cat]||(e[a.cat]=[]),e[a.cat].push(a),e[a.cat].sort((t,a)=>t.name>a.name?1:-1);return e}function getScoreAverage(t,a){var e,s,r,o={},n=[];for(e of a)o[e.product]?(o[e.product].sum+=e.score,o[e.product].n++):o[e.product]={sum:e.score,n:1};for(s of Object.keys(o))n.push({product:s,score:o[s].sum/o[s].n});for(r of n)if(t===r.product)return r.score}export default{checkEmail:checkEmail,checkLikes:checkLikes,checkPass:checkPass,checkRole:checkRole,checkString:checkString,checkUrl:checkUrl,getData:getData,postData:postData,patchData:patchData,putData:putData,deleteData:deleteData,getCats:getCats,getItemName:getItemName,getItemsByCat:getItemsByCat,getScoreAverage:getScoreAverage};